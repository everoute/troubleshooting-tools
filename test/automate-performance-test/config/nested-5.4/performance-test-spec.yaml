# Minimal Performance Test Specification - Reduced Duration
performance_tests:
  throughput:
    single_stream:
      server_cmd: "iperf3 -s -p {port} -B {server_ip} -J"
      client_cmd_tcp: "iperf3 -c {server_ip} -B {client_ip} -p {port} -t {duration} -b {target_bw} -l 65520 -J > {result_file}"
      client_cmd_udp: "iperf3 -c {server_ip} -B {client_ip} -p {port} -t {duration} -b {target_bw} -u -J > {result_file}"
      duration: 3  # Reduced from 30
      target_bw: ["1G"]  # Only 1G test
      ports: [5001]
    multi_stream:
      server_cmd: "iperf3 -s -p {port} -B {server_ip} -J"
      streams: [4]  # Only 2 streams
      base_port: 5001
      duration: 3  # Reduced from 30

  latency:
    server_cmd: "netserver -L {server_ip} -p {port} -D"
    client_cmd_tcp: "netperf -H {server_ip} -p {port} -t TCP_RR -l 10 -- -o min_latency,mean_latency,max_latency,p99_latency,p90_latency > {result_file}"
    client_cmd_udp: "netperf -H {server_ip} -p {port} -t UDP_RR -l 10 -- -o min_latency,mean_latency,max_latency,p99_latency,p90_latency > {result_file}"
    duration: 3  # Reduced from 20
    ports: [12865]

  pps:
    server_cmd: "iperf3 -s -p {port} -B {server_ip} -J"
    client_cmd_tcp: "iperf3 -c {server_ip} -B {client_ip} -p {port} -t {duration} -b {target_bw} -l 64 -J > {result_file}"
    client_cmd_udp: "iperf3 -c {server_ip} -B {client_ip} -p {port} -t {duration} -b {target_bw} -l 64 -u -J > {result_file}"
    single_stream:
      duration: 3
      target_bw: ["1G"]
      ports: [5001]
    multi_stream:
      streams: [4]  # 2 streams
      base_port: 5001
      duration: 3   # 5 seconds

# eBPF Monitoring Configuration
monitoring:
  interval: 2  # Monitoring interval in seconds
  cpu:
    enabled: true
    unit: "percent"
    description: "CPU usage percentage (instantaneous)"
  memory:
    enabled: true
    units:
      vsz: "KB"
      rss: "KB"
      pmem: "percent"
    description: "Virtual memory size, Resident set size, Memory percentage (instantaneous)"
  logsize:
    enabled: true
    unit: "bytes"
    convert_to_human: true  # Convert to K/M/G
    description: "eBPF log file size (instantaneous)"