# 性能测试规格配置
performance_tests:
  throughput:
    single_stream:
      server_cmd: "iperf3 -s -p {port} -B {server_ip}"
      client_cmd_tcp: "iperf3 -c {server_ip} -B {client_ip} -p {port} -t {duration} -b {target_bw} -l 65520 -J > {result_file}"
      client_cmd_udp: "iperf3 -c {server_ip} -B {client_ip} -p {port} -t {duration} -b {target_bw} -u -J > {result_file}"
      duration: 30
      target_bw: ["1G", "10G"]
      ports: [5001]

    multi_stream:
      streams: [2, 4, 8]
      base_port: 5001
      duration: 30

  latency:
    server_cmd: "netserver -L {server_ip} -p {port} -D"
    client_cmd_tcp: "netperf -H {server_ip} -p {port} -t TCP_RR -l 20 -- -o min_latency,mean_latency,max_latency,p99_latency,p90_latency > {result_file}"
    client_cmd_udp: "netperf -H {server_ip} -p {port} -t UDP_RR -l 20 -- -o min_latency,mean_latency,max_latency,p99_latency,p90_latency > {result_file}"
    duration: 20
    ports: [12865]

  pps:
    multi_stream_only: true
    server_cmd: "iperf3 -s -p {port} -B {server_ip}"
    client_cmd_tcp: "iperf3 -c {server_ip} -B {client_ip} -p {port} -t {duration} -b {target_bw} -l 64 -J > {result_file}"
    client_cmd_udp: "iperf3 -c {server_ip} -B {client_ip} -p {port} -t {duration} -b {target_bw} -l 64 -u -J > {result_file}"
    sar_cmd: "sar -n DEV 1 {duration} | grep {interface} > {result_file}"
    streams: [4, 8]
    duration: 30